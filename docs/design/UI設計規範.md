# 簡訊彈窗情境模擬 - UI 情境說明

## 概述

本文檔記錄簡訊系統 UI 情境設計，核心原則：**往最早的排程靠齊**。

> ⚠️ **重要：「往最早的排程靠齊」是指「當天的最早預約」**
> 系統以「同一天」為單位處理簡訊發送，客人在同一天有多個預約時，只會為「當天最早的預約」發送簡訊。

**目的：** 統一「簡訊發送 / 簡訊取消」彈窗的結構、顏色引導與多情境行為，提供 PM / 設計 / 工程師共同參考。

---

## 一、總原則

1.  **預約不會被擋**
    -   所有門市都可以直接幫客人建立預約
    -   簡訊規則只影響「要不要發簡訊、發給哪一筆」，不會阻止預約建立

2.  **簡訊以「當天 + SYSGroup」為單位計算**
    -   同一位客戶 + 同一天 + 同一個 SYSGroup，只會有一筆「當天最早預約」可發簡訊
    -   客人在同一天有多個預約時，以當天最早的預約時間為準

3.  **不同 SYSGroup 彼此獨立**
    -   在 G2 做的任何操作，只會影響 G2 內部的簡訊狀態
    -   不會改動 G0 / G1 / 其他群組的預約與簡訊排程

4.  **黑名單是共用規則**
    -   若勾選「黑名單」，所有彈窗會改為紅色樣式，強調「不發送」

---

## 二、彈窗共用結構（Modal Layout）

### 1. 標題列（Title）

-   **文字：** 簡訊發送 或 簡訊取消
-   **位置：** 置頂靠左
-   **顏色：** 依頁面主題色統一（不因情境改變）

### 2. 提醒資訊區（Alerts Area）

顯示 0~N 個提醒資訊框，每一則提醒資訊為一個獨立的 Alert Box：

-   **danger（紅色系）：** 紅色背景 + 深色文字 + 醒目 icon（⚠️）
    -   用於違反客戶設定、可能帶來客訴的操作
-   **warning（黃色系）：** 黃色/橘色背景 + 深色文字 + 提醒 icon（⚡）
    -   用於排程衝突、自動補位通知、將取代原排程的操作
-   **info（藍色系）：** 藍色背景 + 深色文字 + 資訊 icon（ℹ️）
    -   用於一般資訊提示

**排列順序：** 由上而下，danger 在前（較重要），其後為 warning，最後為 info。

### 3. 簡訊預覽區（SMS Preview）

**結構：**

-   標籤列：簡訊內容 / 發送時間 說明文字（小標）
-   內容區：
    -   文本區：顯示/編輯簡訊內容
    -   時間區：顯示/編輯簡訊排程時間
-   **是否可編輯：** 依情境決定（預設為可編輯，以利 PM 調整）

### 4. 按鈕列（Actions）

-   **左：** 不發送 或 不取消
-   **右：** 確認發送 或 確認取消 / 確認取消並發送補位簡訊
-   **按鈕顏色：** 依「引導方向」與「危險程度」設定，詳見各情境定義

---

## 三、顏色與狀態定義

| 狀態 | 用途 | 應用場景 | 視覺呈現 |
| --- | --- | --- | --- |
| **danger**<br>危險/高風險 | 違反客戶設定<br>可能帶來客訴 | Alert Box<br>按鈕強調 | 🚨 紅色系 |
| **warning**<br>警告/提醒 | 排程衝突<br>自動補位通知<br>取代原排程 | Alert Box<br>提示資訊 | ⚡ 黃色/橘色系 |
| **success**<br>正向引導 | 系統希望使用者<br>傾向執行的操作 | 確認按鈕 | ✅ 綠色 |
| **default**<br>中立/取消 | 保守、不做變更<br>系統中立 | 次要按鈕 | 🔘 灰色 |
| **info**<br>資訊提示 | 一般資訊說明 | Alert Box<br>提示資訊 | ℹ️ 藍色系 |

---

## 四、快速參考表格

| UI 情境 | 彈窗標題 | 提醒資訊（Alert） | 可編輯 | 按鈕設定 | 引導傾向 |
| --- | --- | --- | --- | --- | --- |
| **情境 1**<br>標準發送 | 簡訊發送 | 無 | ✅ | 🔘 不發送 (default)<br>✅ 確認發送 (success) | 中立略偏向發送 |
| **情境 2**<br>客人拒收 | 簡訊發送 | 🚨 danger<br>發送受阻 | ✅ | ⚠️ 不發送 (danger)<br>🔘 確認發送 (default) | 強烈壓制誤發送 |
| **情境 3**<br>排程衝突 | 簡訊發送 | ⚡ warning<br>排程衝突 | ✅ | 🔘 不發送 (default)<br>✅ 確認發送 (success) | 引導理解後決定 |
| **情境 4**<br>複合風險 | 發送受阻 | 🚨 danger：發送受阻<br>⚡ warning：排程衝突 | ✅ | ⚠️ 不發送 (danger)<br>🔘 確認發送 (default) | 強烈壓制誤發送 |
| **情境 5**<br>自動補位 | 簡訊發送 | ⚡ warning<br>自動補位通知 | ✅ | 🔘 不發送 (default)<br>✅ 確認發送 (success) | 引導發送補位通知 |


### 圖例說明

-   🚨 danger（紅色危險） | ⚡ warning（黃色警告） | ℹ️ info（藍色資訊） | ✅ success（綠色正向）
-   ✅ 可編輯 | ❌ 不可編輯

---

## 五、詳細情境說明

### 情境 1：標準發送 (scenario1)

**情境描述：** 一般發送，沒有任何額外限制或衝突。

**彈窗標題：** 簡訊發送

**提醒資訊：** 無

**簡訊內容：**
`提醒您：有在【板橋光澤醫學美容】12/05（四） 10:30，02-0000-0000，請提前30分鐘蒞臨現場報到。`

**簡訊發送時間：** 2025-12-04 18:00

**內容可編輯：** ✅ 是

**按鈕配置：**

-   🔘 不發送（default - 灰色按鈕）
-   ✅ 確認發送（success - 綠色按鈕）

**系統引導傾向：** 中立略偏向發送

---

### 情境 2：客人拒收 (scenario2)

**情境描述：** 客人已設定「不要發送簡訊」，但操作者仍嘗試發送。系統應強烈提示風險。

**彈窗標題：** 簡訊發送

**提醒資訊：**

-   🚨 **danger（紅色）：**
    -   **發送受阻**
    -   客人已設定「不要發送簡訊」，強制發送可能引起客訴。

**簡訊內容：**
`提醒您：有在【板橋光澤醫學美容】12/05（四） 10:30，02-0000-0000，請提前30分鐘蒞臨現場報到。`

**簡訊發送時間：** 2025-12-04 18:00

**內容可編輯：** ✅ 是

**按鈕配置：**

-   ⚠️ 不發送（danger - 紅色按鈕）
-   🔘 確認發送（default - 灰色按鈕）

**系統引導傾向：** 強烈壓制誤發送

---

### 情境 3：排程衝突 (scenario3)

**情境描述：** 客人當天已有多筆預約，系統以最早的預約為主發送簡訊，並提示操作者。

**彈窗標題：** 簡訊發送

**提醒資訊：**

-   ⚡ **warning（黃色）：**
    -   **排程衝突**
    -   客人已有複數預約如下：
    -   (視覺列表呈現)
        -   `2025-12-05 10:00 ← 最早預約（將發送簡訊）`
        -   `2025-12-05 10:00`
        -   `2025-12-05 14:00`
    -   以最早預約簡訊為主，以下開放更新簡訊內容。

**簡訊內容：**
`提醒您：有在【板橋光澤醫學美容】2025-12-05 10:00，02-0000-0000，請提前30分鐘蒞臨現場報到。`

**簡訊發送時間：** 2025-12-04 18:00

**內容可編輯：** ✅ 是

**按鈕配置：**

-   🔘 不發送（default - 灰色按鈕）
-   ✅ 確認發送（success - 綠色按鈕）

**系統引導傾向：** 引導使用者確認以最早預約發送，或編輯內容後再發送。

---

### 情境 4：複合風險 (scenario4)

**情境描述：** 同時觸發「客人拒收」和「排程衝突」的雙重風險情境。

**彈窗標題：** 發送受阻

**提醒資訊：**

-   🚨 **danger（紅色）：**
    -   **發送受阻**
    -   客人已設定「不要發送簡訊」
-   ⚡ **warning（黃色）：**
    -   **排程衝突**
    -   客人已有複數預約如下： (視覺列表呈現)
    -   以最早預約簡訊為主，以下開放更新簡訊內容。

**簡訊內容：**
`【合併通知】陳先生您好，系統已為您保留 12/05 10:30 的最早時段預約。`

**簡訊發送時間：** 2025-12-04 18:00

**內容可編輯：** ✅ 是

**按鈕配置：**

-   ⚠️ 不發送（danger - 紅色按鈕）
-   🔘 確認發送（default - 灰色按鈕）

**系統引導傾向：** 強烈壓制誤發送

---

### 情境 5：自動補位 (scenario5)

**情境描述：** 當新增一筆預約後，系統偵測到此預約會變為當天最早的預約，因此自動以此預約作為新的簡訊發送對象，並通知操作者。

**彈窗標題：** 簡訊發送

**提醒資訊：**

-   ⚡ **warning（黃色）：**
    -   **自動補位通知**
    -   當天尚有其他預約，系統將自動改以當天最早預約發送簡訊：
    -   (視覺列表呈現)
        -   `2025-12-05 14:00 （補位預約，將發送簡訊）`
        -   `2025-12-05 18:00`
    -   系統將自動改以 12/05 14:00 預約發送通知簡訊，您可於下方編輯內容。

**簡訊內容：**
`提醒您：有在【板橋光澤醫學美容】2025-12-05 14:00，02-0000-0000，請提前30分鐘蒞臨現場報到。`

**簡訊發送時間：** 2025-12-04 18:00

**內容可編輯：** ✅ 是

**按鈕配置：**

-   🔘 不發送（default - 灰色按鈕）
-   ✅ 確認發送（success - 綠色按鈕）

**系統引導傾向：** 引導發送補位通知簡訊。


