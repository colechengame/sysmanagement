<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç°¡è¨Šå½ˆçª—æƒ…å¢ƒæ¨¡æ“¬</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.8;
      }
    }

    .animate-slideIn {
      animation: slideIn 0.3s ease-out;
    }

    .animate-pulse-gentle {
      animation: pulse 2s ease-in-out infinite;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
const { useState } = React;

const SCENARIOS = {
  scenario1: {
    id: 'scenario1',
    title: 'ç°¡è¨Šç™¼é€',
    type: 'send',
    alerts: [],
    smsContent: 'æé†’æ‚¨ï¼šæœ‰åœ¨ã€æ¿æ©‹å…‰æ¾¤é†«å­¸ç¾å®¹ã€‘12/05ï¼ˆå››ï¼‰ 10:30ï¼Œ02-0000-0000ï¼Œè«‹æå‰30åˆ†é˜è’è‡¨ç¾å ´å ±åˆ°ã€‚',
    smsTime: '2025-12-04T18:00',
    editable: true,
    buttons: [
      { label: 'ä¸ç™¼é€', style: 'default' },
      { label: 'ç¢ºèªç™¼é€', style: 'success' }
    ],
    description: 'æƒ…å¢ƒ 1ï¼šæ¨™æº–ç™¼é€'
  },
  scenario2: {
    id: 'scenario2',
    title: 'ç°¡è¨Šç™¼é€',
    type: 'send',
    guidance: 'danger',
    alerts: [
      { type: 'danger', text: ['ç™¼é€å—é˜»', 'å®¢äººå·²è¨­å®šã€Œä¸è¦ç™¼é€ç°¡è¨Šã€ï¼Œå¼·åˆ¶ç™¼é€å¯èƒ½å¼•èµ·å®¢è¨´ã€‚'] }
    ],
    smsContent: 'æé†’æ‚¨ï¼šæœ‰åœ¨ã€æ¿æ©‹å…‰æ¾¤é†«å­¸ç¾å®¹ã€‘12/05ï¼ˆå››ï¼‰ 10:30ï¼Œ02-0000-0000ï¼Œè«‹æå‰30åˆ†é˜è’è‡¨ç¾å ´å ±åˆ°ã€‚',
    smsTime: '2025-12-04T18:00',
    editable: true,
    buttons: [
      { label: 'ä¸ç™¼é€', style: 'danger' },
      { label: 'ç¢ºèªç™¼é€', style: 'default' }
    ],
    description: 'æƒ…å¢ƒ 2ï¼šå®¢äººæ‹’æ”¶'
  },
  scenario3: {
    id: 'scenario3',
    title: 'ç°¡è¨Šç™¼é€',
    type: 'send',
    alerts: [
      {
        type: 'warning',
        text: ['æ’ç¨‹è¡çª', 'å®¢äººå·²æœ‰è¤‡æ•¸é ç´„å¦‚ä¸‹ï¼š'],
        appointments: [
          { date: '2025-12-05', time: '10:00', clinic: 'â† æœ€æ—©é ç´„ï¼ˆå°‡ç™¼é€ç°¡è¨Šï¼‰', isEarliest: true },
          { date: '2025-12-05', time: '10:00', isOther: true },
          { date: '2025-12-05', time: '14:00', isOther: true }
        ],
        footer: 'ä»¥æœ€æ—©é ç´„ç°¡è¨Šç‚ºä¸»ï¼Œä»¥ä¸‹é–‹æ”¾æ›´æ–°ç°¡è¨Šå…§å®¹ã€‚'
      }
    ],
    smsContent: 'æé†’æ‚¨ï¼šæœ‰åœ¨ã€æ¿æ©‹å…‰æ¾¤é†«å­¸ç¾å®¹ã€‘2025-12-05 10:00ï¼Œ02-0000-0000ï¼Œè«‹æå‰30åˆ†é˜è’è‡¨ç¾å ´å ±åˆ°ã€‚',
    smsTime: '2025-12-04T18:00',
    editable: true,
    buttons: [
      { label: 'ä¸ç™¼é€', style: 'default' },
      { label: 'ç¢ºèªç™¼é€', style: 'success' }
    ],
    description: 'æƒ…å¢ƒ 3ï¼šæœ€æ—©æ’ç¨‹ä¸»ç°¡è¨Šæ–°å¢æˆ–èª¿æ•´'
  },
  scenario4: {
    id: 'scenario4',
    title: 'ç™¼é€å—é˜»',
    type: 'send',
    guidance: 'danger',
    alerts: [
      { type: 'danger', text: ['ç™¼é€å—é˜»', 'å®¢äººå·²è¨­å®šã€Œä¸è¦ç™¼é€ç°¡è¨Šã€'] },
      {
        type: 'warning',
        text: ['æ’ç¨‹è¡çª', 'å®¢äººå·²æœ‰è¤‡æ•¸é ç´„å¦‚ä¸‹ï¼š'],
        appointments: [
          { date: '2025-12-05', time: '10:30', clinic: 'â† æœ€æ—©é ç´„ï¼ˆå°‡ç™¼é€ç°¡è¨Šï¼‰', isEarliest: true },
          { date: '2025-12-05', time: '14:00', isOther: true }
        ],
        footer: 'ä»¥æœ€æ—©é ç´„ç°¡è¨Šç‚ºä¸»ï¼Œä»¥ä¸‹é–‹æ”¾æ›´æ–°ç°¡è¨Šå…§å®¹ã€‚'
      }
    ],
    smsContent: 'ã€åˆä½µé€šçŸ¥ã€‘é™³å…ˆç”Ÿæ‚¨å¥½ï¼Œç³»çµ±å·²ç‚ºæ‚¨ä¿ç•™ 12/05 10:30 çš„æœ€æ—©æ™‚æ®µé ç´„ã€‚',
    smsTime: '2025-12-04T18:00',
    editable: true,
    buttons: [
      { label: 'ä¸ç™¼é€', style: 'danger' },
      { label: 'ç¢ºèªç™¼é€', style: 'default' }
    ],
    description: 'æƒ…å¢ƒ 4ï¼šè¤‡åˆé¢¨éšª'
  },
  scenario5: {
    id: 'scenario5',
    title: 'ç°¡è¨Šç™¼é€',
    type: 'send',
    alerts: [
      {
        type: 'warning',
        text: ['è‡ªå‹•è£œä½é€šçŸ¥', 'ç•¶å¤©å°šæœ‰å…¶ä»–é ç´„ï¼Œç³»çµ±å°‡è‡ªå‹•æ”¹ä»¥ç•¶å¤©æœ€æ—©é ç´„ç™¼é€ç°¡è¨Šï¼š'],
        appointments: [
          { date: '2025-12-05', time: '14:00', clinic: 'ï¼ˆè£œä½é ç´„ï¼Œå°‡ç™¼é€ç°¡è¨Šï¼‰', isReplacement: true },
          { date: '2025-12-05', time: '18:00', isOther: true }
        ],
        footer: 'ç³»çµ±å°‡è‡ªå‹•æ”¹ä»¥ 12/05 14:00 é ç´„ç™¼é€é€šçŸ¥ç°¡è¨Šï¼Œæ‚¨å¯æ–¼ä¸‹æ–¹ç·¨è¼¯å…§å®¹ã€‚'
      }
    ],
    smsContent: 'æé†’æ‚¨ï¼šæœ‰åœ¨ã€æ¿æ©‹å…‰æ¾¤é†«å­¸ç¾å®¹ã€‘2025-12-05 14:00ï¼Œ02-0000-0000ï¼Œè«‹æå‰30åˆ†é˜è’è‡¨ç¾å ´å ±åˆ°ã€‚',
    smsTime: '2025-12-04T18:00',
    editable: true,
    buttons: [
      { label: 'ä¸ç™¼é€', style: 'default' },
      { label: 'ç¢ºèªç™¼é€', style: 'success' }
    ],
    description: 'æƒ…å¢ƒ 5ï¼šè‡ªå‹•è£œä½'
  }
};

function SmsPreview({ scenario }) {
  const [smsContent, setSmsContent] = useState(scenario.smsContent);
  const [smsTime, setSmsTime] = useState(scenario.smsTime);
  const [feedback, setFeedback] = useState(null);
  const [isProcessing, setIsProcessing] = useState(false);

  const getButtonClass = (style) => {
    const baseClass = "flex-1 px-6 py-3 rounded-lg font-medium transition-all";
    switch(style) {
      case 'success':
        return `${baseClass} bg-green-600 text-white hover:bg-green-700`;
      case 'danger':
        return `${baseClass} bg-red-600 text-white hover:bg-red-700`;
      default:
        return `${baseClass} bg-gray-200 text-gray-700 hover:bg-gray-300`;
    }
  };

  const getAlertClass = (type) => {
    switch(type) {
      case 'danger':
        return 'bg-red-50 border-l-4 border-red-500 text-red-800';
      case 'warning':
        return 'bg-amber-50 border-l-4 border-amber-500 text-amber-800';
      default:
        return 'bg-blue-50 border-l-4 border-blue-500 text-blue-800';
    }
  };

  const handleButtonClick = (button) => {
    setIsProcessing(true);

    // æ¨¡æ“¬è™•ç†æ™‚é–“
    setTimeout(() => {
      let feedbackMessage = {
        type: '',
        text: '',
        icon: ''
      };

      // æ ¹æ“šæŒ‰éˆ•æ¨™ç±¤è¨­å®šå›é¥‹è¨Šæ¯
      if (button.label.includes('ç¢ºèªç™¼é€')) {
        feedbackMessage = {
          type: 'success',
          text: scenario.id === 'scenario2'
            ? 'âœ“ ç°¡è¨Šå·²æˆåŠŸæ’ç¨‹ç™¼é€ï¼åŸæ’ç¨‹å·²å–æ¶ˆã€‚'
            : 'âœ“ ç°¡è¨Šå·²æˆåŠŸæ’ç¨‹ç™¼é€ï¼',
          icon: 'ğŸ“¤'
        };
      } else if (button.label.includes('ç¢ºèªæ›´æ–°')) {
        feedbackMessage = {
          type: 'success',
          text: 'âœ“ å·²å»ºç«‹æ–°é ç´„ï¼Œä¸¦æ›´æ–°æ—¢æœ‰é ç´„çš„ç°¡è¨Šå…§å®¹',
          icon: 'ğŸ“¤'
        };
      } else if (button.label.includes('ä¸æ›´æ–°')) {
        feedbackMessage = {
          type: 'info',
          text: 'âœ— å·²å»ºç«‹æ–°é ç´„ï¼Œç°¡è¨Šç¶­æŒåŸè¨­å®š',
          icon: 'ğŸ“‹'
        };
      } else if (button.label.includes('ä¸ç™¼é€')) {
        feedbackMessage = {
          type: button.style === 'danger' ? 'info' : 'cancel',
          text: 'âœ— å·²å–æ¶ˆç™¼é€ç°¡è¨Š',
          icon: 'ğŸš«'
        };
      } else if (button.label.includes('ç¢ºèªå–æ¶ˆ')) {
        if (button.label.includes('è£œä½')) {
          feedbackMessage = {
            type: 'success',
            text: 'âœ“ å·²å–æ¶ˆåŸæ’ç¨‹ï¼Œè£œä½é ç´„ç°¡è¨Šå·²æˆåŠŸæ’ç¨‹ç™¼é€ï¼',
            icon: 'ğŸ”„'
          };
        } else {
          feedbackMessage = {
            type: 'warning',
            text: 'âœ“ å·²å–æ¶ˆæ’ç¨‹ç°¡è¨Š',
            icon: 'ğŸš«'
          };
        }
      } else if (button.label.includes('ä¸å–æ¶ˆ')) {
        feedbackMessage = {
          type: 'info',
          text: 'âœ— ç¶­æŒåŸæ’ç¨‹',
          icon: 'ğŸ“‹'
        };
      } else {
        feedbackMessage = {
          type: 'info',
          text: `å·²é»æ“Šï¼š${button.label}`,
          icon: 'âœ“'
        };
      }

      setFeedback(feedbackMessage);
      setIsProcessing(false);

      // 3ç§’å¾Œè‡ªå‹•æ¸…é™¤å›é¥‹è¨Šæ¯
      setTimeout(() => {
        setFeedback(null);
      }, 3000);
    }, 500);
  };

  const getFeedbackClass = (type) => {
    const baseClass = "p-4 rounded-lg border-l-4 font-medium flex items-center gap-3 animate-slideIn";
    switch(type) {
      case 'success':
        return `${baseClass} bg-green-50 border-green-500 text-green-800`;
      case 'warning':
        return `${baseClass} bg-amber-50 border-amber-500 text-amber-800`;
      case 'cancel':
        return `${baseClass} bg-gray-50 border-gray-500 text-gray-800`;
      case 'info':
        return `${baseClass} bg-blue-50 border-blue-500 text-blue-800`;
      default:
        return `${baseClass} bg-gray-50 border-gray-400 text-gray-800`;
    }
  };

  return (
    <div className="bg-white rounded-2xl shadow-xl overflow-hidden max-w-2xl mx-auto">
      {/* Header */}
      <div className="bg-gradient-to-r from-purple-600 to-blue-600 px-6 py-4">
        <h2 className="text-xl font-bold text-white">{scenario.title}</h2>
      </div>

      {/* Body */}
      <div className="p-6">
        {/* Alerts */}
        {scenario.alerts.length > 0 && (
          <div className="space-y-3 mb-6">
            {scenario.alerts.map((alert, idx) => (
              <div key={idx} className={`${getAlertClass(alert.type)} p-4 rounded-lg`}>
                <div className="flex items-start gap-2">
                  {alert.type === 'warning' && <span className="text-xl mt-0.5">âš¡</span>}
                  {alert.type === 'danger' && <span className="text-xl mt-0.5">âš ï¸</span>}
                  {(!['warning', 'danger'].includes(alert.type)) && (
                    <svg className="w-5 h-5 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                      <path fillRule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
                    </svg>
                  )}
                  <div className="flex-1">
                    {Array.isArray(alert.text) ? (
                      <div>
                        <p className="text-xs font-bold">{alert.text[0]}</p>
                        {alert.text.slice(1).map((line, i) => (
                          <p key={i} className="text-sm font-medium mt-1">{line}</p>
                        ))}
                      </div>
                    ) : (
                      <p className="font-medium text-sm">{alert.text}</p>
                    )}
                    {alert.appointments && (
                      <div className="mt-3 space-y-2">
                        {alert.appointments.map((apt, i) => (
                          <div key={i} className={`text-xs p-2 rounded flex items-baseline ${
                            apt.isCurrent ? 'bg-white/50 border border-amber-300' :
                            apt.isCancel ? 'bg-red-100/50 line-through' :
                            apt.isReplacement ? 'bg-green-100/50 font-medium' :
                            apt.isExisting ? 'bg-blue-100/50 font-medium' :
                            apt.isEarliest ? 'bg-green-100/50 font-medium' :
                            apt.isOld ? 'bg-gray-100/50' :
                            'bg-white/30'
                          }`}>
                            <span className="mr-2">â€¢</span>
                            <span>
                              {apt.date} {apt.time} {apt.clinic && ` ${apt.clinic}`}
                              {apt.isCurrent && <span className="ml-2 text-amber-700">â† ç•¶å‰</span>}
                              {apt.isCancel && <span className="ml-2 text-red-700">âœ— å³å°‡å–æ¶ˆ</span>}
                              {apt.isReplacement && <span className="ml-2 text-green-700">âœ“ è£œä½</span>}
                              {apt.isExisting && <span className="ml-2 text-blue-700">âœ“ æ—¢æœ‰</span>}
                              {apt.isEarliest && <span className="ml-2 text-green-700">âœ“ æœ€æ—©</span>}
                            </span>
                          </div>
                        ))}
                      </div>
                    )}
                    {alert.footer && (
                      <p className="mt-2 text-sm font-bold">{alert.footer}</p>
                    )}
                  </div>
                </div>
              </div>
            ))}
          </div>
        )}

        {/* SMS Preview */}
        <div className="bg-gray-50 border border-gray-200 rounded-xl p-5 mb-6">
          <div className="flex items-center gap-2 mb-3">
            <svg className="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
            </svg>
            <span className="font-semibold text-gray-700">ç°¡è¨Šå…§å®¹é è¦½</span>
            {scenario.editable && (
              <span className="ml-auto text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full">å¯ç·¨è¼¯</span>
            )}
          </div>
          {scenario.editable ? (
            <textarea
              value={smsContent}
              onChange={(e) => setSmsContent(e.target.value)}
              className="w-full p-3 border border-gray-300 rounded-lg text-sm resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              rows="3"
            />
          ) : (
            <p className="text-sm text-gray-700 leading-relaxed bg-white p-3 rounded-lg">{smsContent}</p>
          )}
        </div>

        {/* SMS Send Time */}
        <div className="mb-6">
          <label className="block text-sm font-medium text-gray-700 mb-2">
            ğŸ“… ç°¡è¨Šç™¼é€æ™‚é–“
          </label>
          {scenario.editable ? (
            <input
              type="datetime-local"
              value={smsTime}
              onChange={(e) => setSmsTime(e.target.value)}
              className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            />
          ) : (
            <div className="px-4 py-2.5 bg-gray-100 border border-gray-300 rounded-lg text-gray-700">
              {new Date(smsTime).toLocaleString('zh-TW')}
            </div>
          )}
        </div>

        {/* Feedback Message */}
        {feedback && (
          <div className={getFeedbackClass(feedback.type)}>
            <span className="text-2xl">{feedback.icon}</span>
            <span className="flex-1">{feedback.text}</span>
            <button
              onClick={() => setFeedback(null)}
              className="text-current opacity-50 hover:opacity-100 transition-opacity"
            >
              âœ•
            </button>
          </div>
        )}

        {/* Buttons */}
        <div className={`flex gap-4 ${feedback ? 'mt-4' : ''}`}>
          {scenario.buttons.map((btn, idx) => (
            <button
              key={idx}
              onClick={() => handleButtonClick(btn)}
              disabled={isProcessing}
              className={`${getButtonClass(btn.style)} ${isProcessing ? 'opacity-50 cursor-not-allowed' : 'hover:scale-105 active:scale-95'}`}
            >
              {isProcessing ? (
                <span className="flex items-center justify-center gap-2">
                  <svg className="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  è™•ç†ä¸­...
                </span>
              ) : (
                btn.label
              )}
            </button>
          ))}
        </div>
      </div>
    </div>
  );
}

function App() {
  const [selectedScenario, setSelectedScenario] = useState('scenario1');

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100">
      <div className="flex h-screen">
        {/* Left Sidebar - Scenario List */}
        <div className="w-80 bg-white border-r border-gray-200 overflow-y-auto">
          <div className="p-6 border-b border-gray-200 bg-gradient-to-r from-purple-600 to-blue-600">
            <h1 className="text-xl font-bold text-white">ç°¡è¨Šå½ˆçª—æƒ…å¢ƒ</h1>
            <p className="text-sm text-purple-100 mt-1">é»æ“ŠæŸ¥çœ‹é è¦½</p>
          </div>

          <div className="p-4 space-y-2">
            {Object.values(SCENARIOS).map((scenario) => (
              <div
                key={scenario.id}
                onClick={() => setSelectedScenario(scenario.id)}
                className={`p-4 rounded-lg cursor-pointer transition-all border-2 ${
                  selectedScenario === scenario.id
                    ? 'bg-purple-50 border-purple-500 shadow-md'
                    : 'bg-white border-gray-200 hover:border-purple-300 hover:shadow-sm'
                }`}
              >
                <div className="flex items-start justify-between mb-2">
                  <h3 className="font-semibold text-gray-800 text-sm">{scenario.title}</h3>
                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${
                    (scenario.guidance === 'danger')
                      ? 'bg-red-100 text-red-700'
                      : scenario.type === 'send'
                        ? 'bg-green-100 text-green-700'
                        : 'bg-red-100 text-red-700'
                  }`}>
                    {scenario.type === 'send' ? 'ç™¼é€' : 'å–æ¶ˆ'}
                  </span>
                </div>
                <p className="text-xs text-gray-600">{scenario.description}</p>

                {/* Alert badges */}
                {scenario.alerts.length > 0 && (
                  <div className="mt-2 flex flex-wrap gap-1">
                    {scenario.alerts.map((alert, idx) => (
                      <span key={idx} className={`text-xs px-2 py-0.5 rounded ${
                        alert.type === 'danger' ? 'bg-red-100 text-red-700' : 'bg-amber-100 text-amber-700'
                      }`}>
                        {alert.type === 'danger' ? 'âš ï¸ å±éšª' : 'âš¡ è­¦å‘Š'}
                      </span>
                    ))}
                  </div>
                )}
              </div>
            ))}
          </div>
        </div>

        {/* Right Panel - Preview */}
        <div className="flex-1 overflow-y-auto p-8">
          <SmsPreview key={selectedScenario} scenario={SCENARIOS[selectedScenario]} />
        </div>
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
