<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç°¡è¨Šè¨­å®šæ•™å­¸ - é–‹é—œèˆ‡å„²å­˜æµç¨‹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 1200px;
            width: 100%;
            padding: 40px;
            position: relative;
        }

        .header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .header-icon {
            width: 40px;
            height: 40px;
            background: #4169E1;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }

        .header-icon svg {
            width: 24px;
            height: 24px;
            fill: white;
        }

        .header h1 {
            font-size: 28px;
            color: #333;
            font-weight: 600;
        }

        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-top: 30px;
        }

        .settings-panel {
            padding: 20px;
            background: #fafafa;
            border-radius: 12px;
            position: relative;
        }

        .preview-panel {
            padding: 20px;
            background: #f5f5f5;
            border-radius: 12px;
        }

        .setting-item {
            margin-bottom: 25px;
        }

        .setting-label {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 500;
            color: #555;
        }

        .toggle-wrapper {
            display: inline-block;
            position: relative;
        }

        .toggle-switch {
            width: 60px;
            height: 30px;
            background: #ccc;
            border-radius: 15px;
            position: relative;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .toggle-switch.active {
            background: #4169E1;
        }

        .toggle-slider {
            width: 26px;
            height: 26px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(30px);
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.3s ease;
            resize: vertical;
        }

        .input-field:focus {
            outline: none;
            border-color: #4169E1;
        }

        .input-field.editing-highlight {
            border-color: #2196F3;
            background: #e3f2fd;
            animation: input-pulse 2s ease-in-out infinite;
        }

        @keyframes input-pulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(33, 150, 243, 0.4);
            }
            50% {
                box-shadow: 0 0 0 8px rgba(33, 150, 243, 0);
            }
        }

        textarea.input-field {
            min-height: 80px;
        }

        .preview-box {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            min-height: 200px;
            transition: all 0.3s ease;
        }

        .preview-box.updating {
            border-color: #4CAF50;
            background: #f1f8f4;
            animation: preview-update 0.6s ease;
        }

        @keyframes preview-update {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
                box-shadow: 0 0 20px rgba(76, 175, 80, 0.3);
            }
        }

        .preview-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .preview-content {
            color: #666;
            line-height: 1.8;
            white-space: pre-wrap;
        }

        .char-count {
            text-align: right;
            margin-top: 10px;
            font-size: 13px;
            color: #999;
        }

        .char-count.warning {
            color: #e74c3c;
            font-weight: 600;
        }

        .save-button {
            background: #4169E1;
            color: white;
            border: none;
            padding: 14px 40px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(65, 105, 225, 0.3);
            margin-top: 20px;
            display: block;
            width: 100%;
        }

        .save-button:hover {
            background: #3555c7;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(65, 105, 225, 0.4);
        }

        .save-button:active {
            transform: translateY(0);
        }

        .save-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* å‹•ç•«æç¤ºå…ƒç´  */
        .hint-message {
            position: absolute;
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 12px 20px;
            color: #856404;
            font-weight: 500;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);
            z-index: 100;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            pointer-events: none;
            white-space: nowrap;
            line-height: 1.6;
        }

        /* ç·¨è¼¯æ¨¡æ¿èƒŒæ™¯é®ç½© */
        .edit-template-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            z-index: 140;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .edit-template-overlay.show {
            opacity: 1;
        }

        /* ç·¨è¼¯æ¨¡æ¿ç‰¹åˆ¥èªªæ˜æ¡† */
        .edit-template-hint {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border: 3px solid #2196F3;
            border-radius: 12px;
            padding: 20px 24px;
            color: #0d47a1;
            font-weight: 600;
            font-size: 15px;
            box-shadow: 0 8px 24px rgba(33, 150, 243, 0.3);
            z-index: 150;
            opacity: 0;
            transition: all 0.4s ease;
            pointer-events: none;
            max-width: 500px;
            line-height: 1.8;
            white-space: normal;
        }

        .edit-template-hint.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .edit-template-hint .hint-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 12px;
            color: #1976D2;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .edit-template-hint .hint-content {
            font-size: 14px;
            font-weight: 500;
            line-height: 1.8;
        }

        .edit-template-hint .hint-list {
            margin-top: 10px;
            padding-left: 20px;
        }

        .edit-template-hint .hint-list li {
            margin-bottom: 8px;
        }

        .hint-message.show {
            opacity: 1;
            transform: translateY(0);
        }

        .hint-arrow {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid #ffc107;
            bottom: -10px;
            left: 20px;
        }

        .success-message {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
            text-align: center;
            padding: 16px;
            border-radius: 8px;
            margin-top: 20px;
            font-weight: 600;
            opacity: 0;
            transform: scale(0.9);
            transition: all 0.3s ease;
        }

        .success-message.show {
            opacity: 1;
            transform: scale(1);
        }

        /* é«˜äº®å‹•ç•« */
        .highlight {
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(65, 105, 225, 0.7);
            }
            50% {
                box-shadow: 0 0 0 20px rgba(65, 105, 225, 0);
            }
        }

        .glow {
            animation: glow 1.5s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% {
                box-shadow: 0 0 5px rgba(65, 105, 225, 0.5), 0 0 10px rgba(65, 105, 225, 0.3);
            }
            50% {
                box-shadow: 0 0 20px rgba(65, 105, 225, 0.8), 0 0 30px rgba(65, 105, 225, 0.5);
            }
        }

        /* æ­¥é©ŸæŒ‡ç¤ºå™¨ */
        .step-indicator {
            position: fixed;
            top: 20px;
            left: 20px;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            min-width: 250px;
            max-width: 280px;
            z-index: 50;
        }

        .step-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .step-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            padding: 8px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .step-item.active {
            background: #e3f2fd;
            border-left: 4px solid #4169E1;
            padding-left: 12px;
        }

        .step-item.completed {
            opacity: 0.6;
        }

        .step-number {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .step-item.active .step-number {
            background: #4169E1;
            color: white;
        }

        .step-item.completed .step-number {
            background: #28a745;
            color: white;
        }

        .step-text {
            font-size: 14px;
            color: #555;
            line-height: 1.4;
        }

        /* æ§åˆ¶æŒ‰éˆ• */
        .controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .control-btn {
            background: white;
            border: 2px solid #4169E1;
            color: #4169E1;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: #4169E1;
            color: white;
        }

        .control-btn.playing {
            background: #4169E1;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
                </svg>
            </div>
            <h1>ç°¡è¨Šè¨­å®š</h1>
        </div>

        <div class="content-wrapper">
            <!-- å·¦å´è¨­å®šå€ -->
            <div class="settings-panel">
                <div class="hint-message" id="hint1" style="top: -70px; left: 0;">
                    <div class="hint-arrow"></div>
                    è«‹å…ˆé–‹å•Ÿã€Œç™¼é€é ç´„ç°¡è¨Šã€é–‹é—œ
                </div>

                <div class="hint-message" id="hint2" style="top: -70px; left: 0;">
                    <div class="hint-arrow"></div>
                    âš ï¸ è«‹è¨˜å¾—é»æ“Šã€Œå„²å­˜ã€æŒ‰éˆ•ä»¥å¥—ç”¨è¨­å®š
                </div>

                <div class="hint-message" id="hint3" style="top: 110px; left: 0;">
                    <div class="hint-arrow" style="border-bottom: 10px solid #ffc107; border-top: none; top: -10px; bottom: auto;"></div>
                    ğŸ’¡ ç°¡è¨Šå‹¿å¯„åˆ¤æ–·ï¼šç³»çµ±é è¨­æª¢æŸ¥æœƒå“¡ç¶­è­·ã€Œæ¨™è¨»ã€æ¬„ä½é—œéµå­—ï¼Œè‹¥éœ€é¡å¤–åˆ¤æ–·ã€Œæ¥å—é›»è¨ª/éŠ·ã€æ¬„ä½è¨­å®šï¼Œè«‹é–‹å•Ÿæ­¤é–‹é—œ
                </div>

                <div class="edit-template-hint" id="editTemplateHint">
                    <div class="hint-title">
                        âœï¸ ç·¨è¼¯ç°¡è¨Šæ¨¡æ¿å…§å®¹
                    </div>
                    <div class="hint-content">
                        <strong>é‡è¦æç¤ºï¼š</strong>
                        <ul class="hint-list">
                            <li>ğŸ“ å¯è‡ªè¨‚ã€Œç°¡è¨Šæ¨™é¡Œã€ã€ã€Œé–€å¸‚è³‡è¨Šã€å’Œã€Œç°¡è¨Šçµå°¾ã€</li>
                            <li>ğŸ‘ï¸ å³å´æœƒå³æ™‚é è¦½å®Œæ•´ç°¡è¨Šå…§å®¹</li>
                            <li>âš ï¸ æ³¨æ„å­—æ•¸é™åˆ¶ 70 å­—ï¼ˆå«ç³»çµ±è‡ªå‹•æ’å…¥çš„é ç´„è³‡è¨Šï¼‰</li>
                            <li>ğŸ’¾ ç·¨è¼¯å®Œæˆå¾Œå‹™å¿…é»æ“Šã€Œå„²å­˜ã€æŒ‰éˆ•</li>
                        </ul>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <span>ç™¼é€é ç´„ç°¡è¨Š</span>
                        <div class="toggle-wrapper">
                            <div class="toggle-switch" id="toggleSwitch">
                                <div class="toggle-slider"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <span>åŒ…å«æ¥å—é›»è¨ª/éŠ·</span>
                        <div class="toggle-wrapper">
                            <div class="toggle-switch" id="telemarketingToggle">
                                <div class="toggle-slider"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <span>ç°¡è¨Šæ¨™é¡Œ</span>
                    </div>
                    <input type="text" class="input-field" id="smsTitle"
                           placeholder="æé†’æ‚¨æœ‰é ç´„ï¼š"
                           value="æé†’æ‚¨æœ‰é ç´„ï¼š">
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <span>é–€å¸‚è³‡è¨Š</span>
                    </div>
                    <textarea class="input-field" id="storeInfo"
                              placeholder="è«‹è¼¸å…¥é–€å¸‚è¯çµ¡è³‡è¨Š">02-2XXXX1300</textarea>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <span>ç°¡è¨Šçµå°¾</span>
                    </div>
                    <textarea class="input-field" id="smsFooter"
                              placeholder="è«‹è¨˜å¾—æ”œå¸¶å¥ä¿å¡è‡³æ«ƒå°å ±åˆ°ï½">è«‹è¨˜å¾—æ”œå¸¶å¥ä¿å¡è‡³æ«ƒå°å ±åˆ°ï½</textarea>
                </div>

                <button class="save-button" id="saveButton" disabled>
                    å„²å­˜
                </button>

                <div class="success-message" id="successMessage">
                    âœ“ ç°¡è¨Šæ¨¡æ¿å·²å„²å­˜ä¸¦ç”Ÿæ•ˆï¼
                </div>
            </div>

            <!-- å³å´é è¦½å€ -->
            <div class="preview-panel">
                <div class="preview-title">è¨Šæ¯é è¦½</div>
                <div class="preview-box">
                    <div class="preview-content" id="previewContent">
æé†’æ‚¨æœ‰é ç´„ï¼šã€çš®è†šå…‰æ¾¤ä¿å¥ã€‘12/03(ä¸‰) 15:49 ,02-2XXXX1300 ,è«‹è¨˜å¾—æ”œå¸¶å¥ä¿å¡è‡³æ«ƒå°å ±åˆ°ï½
                    </div>
                    <div class="char-count">
                        å·²è¼¸å…¥ï¼š<span id="charCount">57</span>å­—
                    </div>
                    <div class="char-count warning">
                        é™åˆ¶è¼¸å…¥å­—æ•¸ï¼š70å­—
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ­¥é©ŸæŒ‡ç¤ºå™¨ -->
    <div class="step-indicator">
        <div class="step-title">æ•™å­¸æ­¥é©Ÿ</div>
        <div class="step-item" id="step1">
            <div class="step-number">1</div>
            <div class="step-text">é–‹å•Ÿç°¡è¨Šç™¼é€é–‹é—œ</div>
        </div>
        <div class="step-item" id="step2">
            <div class="step-number">2</div>
            <div class="step-text">è¨­å®šã€Œæ¥å—é›»è¨ª/éŠ·ã€æ¢ä»¶ï¼ˆå°æ‡‰æœƒå“¡ç¶­è­·æ¬„ä½ï¼‰</div>
        </div>
        <div class="step-item" id="step3">
            <div class="step-number">3</div>
            <div class="step-text">ç·¨è¼¯ç°¡è¨Šæ¨¡æ¿å…§å®¹</div>
        </div>
        <div class="step-item" id="step4">
            <div class="step-number">4</div>
            <div class="step-text">é»æ“Šå„²å­˜ä¸¦ç¢ºèªè¨­å®šå·²ç”Ÿæ•ˆ</div>
        </div>
    </div>

    <!-- ç·¨è¼¯æ¨¡æ¿é®ç½©å±¤ -->
    <div class="edit-template-overlay" id="editTemplateOverlay"></div>

    <!-- æ§åˆ¶æŒ‰éˆ• -->
    <div class="controls">
        <button class="control-btn" id="restartBtn">é‡æ–°æ’­æ”¾</button>
        <button class="control-btn playing" id="playPauseBtn">æš«åœ</button>
    </div>

    <script>
        // å…ƒç´ å¼•ç”¨
        const toggleSwitch = document.getElementById('toggleSwitch');
        const telemarketingToggle = document.getElementById('telemarketingToggle');
        const saveButton = document.getElementById('saveButton');
        const successMessage = document.getElementById('successMessage');
        const hint1 = document.getElementById('hint1');
        const hint2 = document.getElementById('hint2');
        const hint3 = document.getElementById('hint3');
        const editTemplateHint = document.getElementById('editTemplateHint');
        const editTemplateOverlay = document.getElementById('editTemplateOverlay');
        const inputFields = [
            document.getElementById('smsTitle'),
            document.getElementById('storeInfo'),
            document.getElementById('smsFooter')
        ];
        const previewBox = document.querySelector('.preview-box');
        const previewContent = document.getElementById('previewContent');
        const charCount = document.getElementById('charCount');
        const steps = [
            document.getElementById('step1'),
            document.getElementById('step2'),
            document.getElementById('step3'),
            document.getElementById('step4')
        ];
        const restartBtn = document.getElementById('restartBtn');
        const playPauseBtn = document.getElementById('playPauseBtn');

        // æ›´æ–°é è¦½å…§å®¹
        function updatePreview() {
            const title = inputFields[0].value;
            const storeInfo = inputFields[1].value;
            const footer = inputFields[2].value;
            const preview = `${title}ã€çš®è†šå…‰æ¾¤ä¿å¥ã€‘12/03(ä¸‰) 15:49 ,${storeInfo} ,${footer}`;
            previewContent.textContent = preview;
            charCount.textContent = preview.length;
        }

        // å‹•ç•«ç‹€æ…‹
        let animationState = {
            currentStep: 0,
            isPlaying: true,
            timeouts: [],
            intervals: []
        };

        // æ¸…é™¤æ‰€æœ‰è¨ˆæ™‚å™¨
        function clearAllTimeouts() {
            animationState.timeouts.forEach(timeout => clearTimeout(timeout));
            animationState.intervals.forEach(interval => clearInterval(interval));
            animationState.timeouts = [];
            animationState.intervals = [];
        }

        // è¨­ç½®æ­¥é©Ÿç‹€æ…‹
        function setStepState(stepIndex, state) {
            steps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < stepIndex) {
                    step.classList.add('completed');
                } else if (index === stepIndex) {
                    step.classList.add('active');
                }
            });
        }

        // å‹•ç•«åºåˆ—
        function startAnimation() {
            clearAllTimeouts();
            animationState.isPlaying = true;
            playPauseBtn.textContent = 'æš«åœ';
            playPauseBtn.classList.add('playing');

            // é‡ç½®ç‹€æ…‹
            toggleSwitch.classList.remove('active');
            telemarketingToggle.classList.remove('active');
            saveButton.disabled = true;
            successMessage.classList.remove('show');
            hint1.classList.remove('show');
            hint2.classList.remove('show');
            hint3.classList.remove('show');
            editTemplateHint.classList.remove('show');
            editTemplateOverlay.classList.remove('show');
            toggleSwitch.classList.remove('highlight', 'glow');
            telemarketingToggle.classList.remove('highlight', 'glow');
            saveButton.classList.remove('highlight', 'glow');
            previewBox.classList.remove('updating');
            inputFields.forEach(field => field.classList.remove('editing-highlight'));
            // é‡ç½®è¼¸å…¥æ¡†å…§å®¹
            inputFields[0].value = 'æé†’æ‚¨æœ‰é ç´„ï¼š';
            inputFields[1].value = '02-2XXXX1300';
            inputFields[2].value = 'è«‹è¨˜å¾—æ”œå¸¶å¥ä¿å¡è‡³æ«ƒå°å ±åˆ°ï½';
            updatePreview();
            setStepState(0, 'active');

            // æ­¥é©Ÿ 1: é¡¯ç¤ºæç¤º1 - é–‹å•Ÿé–‹é—œ
            animationState.timeouts.push(setTimeout(() => {
                if (!animationState.isPlaying) return;
                hint1.classList.add('show');
                toggleSwitch.classList.add('glow');
                setStepState(0, 'active');
            }, 1000));

            // æ­¥é©Ÿ 2: é–‹å•Ÿç°¡è¨Šç™¼é€é–‹é—œ
            animationState.timeouts.push(setTimeout(() => {
                if (!animationState.isPlaying) return;
                toggleSwitch.classList.add('active');
                toggleSwitch.classList.remove('glow');
                hint1.classList.remove('show');
            }, 3000));

            // æ­¥é©Ÿ 3: é¡¯ç¤ºæç¤º3 - èªªæ˜é›»è¨ª/éŠ·é–‹é—œ
            animationState.timeouts.push(setTimeout(() => {
                if (!animationState.isPlaying) return;
                hint3.classList.add('show');
                telemarketingToggle.classList.add('glow');
                setStepState(1, 'active');
            }, 4000));

            // æ­¥é©Ÿ 4: éš±è—æç¤º3ï¼Œé¡¯ç¤ºç·¨è¼¯æ¨¡æ¿ç‰¹åˆ¥èªªæ˜å’Œé®ç½©å±¤
            animationState.timeouts.push(setTimeout(() => {
                if (!animationState.isPlaying) return;
                hint3.classList.remove('show');
                telemarketingToggle.classList.remove('glow');
                editTemplateOverlay.classList.add('show');
                editTemplateHint.classList.add('show');
                setStepState(2, 'active');
            }, 7000));

            // æ­¥é©Ÿ 4.5: é«˜äº®ç¬¬ä¸€å€‹è¼¸å…¥æ¡†ä¸¦é¡¯ç¤ºé è¦½æ›´æ–°
            animationState.timeouts.push(setTimeout(() => {
                if (!animationState.isPlaying) return;
                inputFields[0].classList.add('editing-highlight');
                previewBox.classList.add('updating');
                setTimeout(() => {
                    previewBox.classList.remove('updating');
                }, 600);
            }, 8000));

            // æ­¥é©Ÿ 4.6: åˆ‡æ›åˆ°ç¬¬äºŒå€‹è¼¸å…¥æ¡†ï¼ˆé–€å¸‚è³‡è¨Šï¼‰ä¸¦é–‹å§‹ä¿®æ”¹
            animationState.timeouts.push(setTimeout(() => {
                if (!animationState.isPlaying) return;
                inputFields[0].classList.remove('editing-highlight');
                inputFields[1].classList.add('editing-highlight');

                // æ¨¡æ“¬æ‰“å­—æ•ˆæœä¿®æ”¹é–€å¸‚è³‡è¨Š
                const newStoreInfo = '02-2XXXX1300ï¼Œæå‰30åˆ†é˜è’è‡¨ç¾å ´å ±åˆ°';
                let currentText = inputFields[1].value;
                let targetIndex = 0;

                const typingInterval = setInterval(() => {
                    if (!animationState.isPlaying || targetIndex >= newStoreInfo.length) {
                        clearInterval(typingInterval);
                        return;
                    }
                    currentText = newStoreInfo.substring(0, targetIndex + 1);
                    inputFields[1].value = currentText;
                    updatePreview();
                    previewBox.classList.add('updating');
                    setTimeout(() => {
                        previewBox.classList.remove('updating');
                    }, 200);
                    targetIndex++;
                }, 100);

                animationState.intervals.push(typingInterval);
            }, 9500));

            // æ­¥é©Ÿ 4.7: åˆ‡æ›åˆ°ç¬¬ä¸‰å€‹è¼¸å…¥æ¡†
            animationState.timeouts.push(setTimeout(() => {
                if (!animationState.isPlaying) return;
                inputFields[1].classList.remove('editing-highlight');
                inputFields[2].classList.add('editing-highlight');
                previewBox.classList.add('updating');
                setTimeout(() => {
                    previewBox.classList.remove('updating');
                }, 600);
            }, 12500));

            // æ­¥é©Ÿ 4.8: å®Œæˆç·¨è¼¯ï¼Œç§»é™¤æ‰€æœ‰é«˜äº®å’Œé®ç½©å±¤
            animationState.timeouts.push(setTimeout(() => {
                if (!animationState.isPlaying) return;
                inputFields[2].classList.remove('editing-highlight');
                editTemplateHint.classList.remove('show');
                editTemplateOverlay.classList.remove('show');
            }, 14000));

            // æ­¥é©Ÿ 5: é¡¯ç¤ºæç¤º2 - è¨˜å¾—å„²å­˜
            animationState.timeouts.push(setTimeout(() => {
                if (!animationState.isPlaying) return;
                saveButton.disabled = false;
                hint2.classList.add('show');
                saveButton.classList.add('glow');
                setStepState(3, 'active');
            }, 14500));

            // æ­¥é©Ÿ 6: é»æ“Šå„²å­˜
            animationState.timeouts.push(setTimeout(() => {
                if (!animationState.isPlaying) return;
                saveButton.classList.remove('glow');
                saveButton.classList.add('highlight');
                hint2.classList.remove('show');
            }, 16500));

            // æ­¥é©Ÿ 7: é¡¯ç¤ºæˆåŠŸè¨Šæ¯ä¸¦å®Œæˆæ‰€æœ‰æ­¥é©Ÿ
            animationState.timeouts.push(setTimeout(() => {
                if (!animationState.isPlaying) return;
                saveButton.classList.remove('highlight');
                successMessage.classList.add('show');
                // è¨­ç½®æ‰€æœ‰æ­¥é©Ÿç‚ºå®Œæˆç‹€æ…‹
                steps.forEach(step => {
                    step.classList.remove('active');
                    step.classList.add('completed');
                });
            }, 17500));

            // æ­¥é©Ÿ 8: è‡ªå‹•é‡æ–°æ’­æ”¾
            animationState.timeouts.push(setTimeout(() => {
                if (!animationState.isPlaying) return;
                startAnimation();
            }, 20000));
        }

        // æš«åœ/ç¹¼çºŒ
        function togglePlayPause() {
            if (animationState.isPlaying) {
                animationState.isPlaying = false;
                clearAllTimeouts();
                playPauseBtn.textContent = 'ç¹¼çºŒ';
                playPauseBtn.classList.remove('playing');
            } else {
                startAnimation();
            }
        }

        // é‡æ–°æ’­æ”¾
        function restart() {
            startAnimation();
        }

        // æ‰‹å‹•é»æ“Šé–‹é—œ
        toggleSwitch.addEventListener('click', () => {
            toggleSwitch.classList.toggle('active');
            saveButton.disabled = !toggleSwitch.classList.contains('active');
        });

        // æ‰‹å‹•é»æ“Šé›»è¨ª/éŠ·é–‹é—œ
        telemarketingToggle.addEventListener('click', () => {
            telemarketingToggle.classList.toggle('active');
        });

        // æ‰‹å‹•é»æ“Šå„²å­˜
        saveButton.addEventListener('click', () => {
            if (!saveButton.disabled) {
                successMessage.classList.add('show');
                setTimeout(() => {
                    successMessage.classList.remove('show');
                }, 3000);
            }
        });

        // æ§åˆ¶æŒ‰éˆ•äº‹ä»¶
        restartBtn.addEventListener('click', restart);
        playPauseBtn.addEventListener('click', togglePlayPause);

        // é–‹å§‹å‹•ç•«
        setTimeout(startAnimation, 500);
    </script>
</body>
</html>
